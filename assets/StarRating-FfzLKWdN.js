import{r as u,j as t}from"./iframe-uRyd9Bza.js";import{g as k}from"./classnames-helper-C6tUBjOJ.js";import{I as O}from"./Icon-BCBBvEMd.js";import{T as z}from"./Tooltip-D_Hy-_Ei.js";const B=({className:p,rating:c,maxRating:m=5,compact:n=!1,readonly:r=!1,onRatingChange:f,size:g="md",totalRatings:a,ratingBreakdown:h,showDetailedTooltip:_=!1,reviewsLink:d,onReviewsClick:v})=>{const[w,b]=u.useState(null),[i,j]=u.useState(null),T=u.useRef(null);u.useEffect(()=>{const e=s=>{const l=s.target;l.closest(".tooltip")||l.closest(".tooltip-container")||j(null)};if(i!==null)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i]);const y=k({"star-rating":!0,"star-rating--compact":n,"star-rating--readonly":r,[`star-rating--${g}`]:!0,[`${p}`]:!!p}),C=e=>{const s=w??c;return e<Math.floor(s)?"filled":e<s&&s%1>=.5?"half":"empty"},$=e=>{!r&&f?f(e+1):r&&_&&j(i===e?null:e)},E=e=>{r||b(e+1)},R=()=>{r||b(null)},V=()=>{switch(g){case"sm":return n?14:16;case"md":return n?16:20;case"lg":return n?18:24}},N=e=>{const s=C(e),l=k({star:!0,[`star--${s}`]:!0,"star--interactive":!r}),x=_&&h&&a?t.jsxs("div",{className:"star-rating-tooltip",children:[t.jsxs("div",{className:"star-rating-tooltip__header",children:[t.jsxs("strong",{children:[c.toFixed(1)," out of ",m]})," ","rating"]}),t.jsxs("div",{className:"star-rating-tooltip__subtitle",children:["(",a,") global ratings"]}),t.jsx("div",{className:"star-rating-tooltip__breakdown",children:[5,4,3,2,1].map(o=>{const q=h[o]||0;return t.jsxs("div",{className:"star-rating-tooltip__row",children:[t.jsxs("span",{className:"star-rating-tooltip__label",children:[o," star"]}),t.jsx("div",{className:"star-rating-tooltip__progress",children:t.jsx("div",{className:"star-rating-tooltip__progress-bar",style:{width:`${q}%`}})}),t.jsxs("span",{className:"star-rating-tooltip__percentage",children:[q,"%"]})]},o)})}),(d||v)&&t.jsx("div",{className:"star-rating-tooltip__footer",children:d?t.jsx("a",{href:d,className:"star-rating-tooltip__link",target:"_blank",rel:"noopener noreferrer",children:"See all reviews"}):t.jsx("button",{type:"button",className:"star-rating-tooltip__link",onClick:v,style:{border:"none",background:"none",padding:0},children:"See all reviews"})})]}):r?null:`${e+1} star${e>0?"s":""}`,S=t.jsx("button",{type:"button",className:l,onClick:()=>$(e),onMouseEnter:()=>E(e),onMouseLeave:R,disabled:r,"aria-label":`Rate ${e+1} star${e>0?"s":""}`,children:t.jsx(O,{name:"star",size:V(),className:"star__icon"})});if(x){const o=i===e||i===null;return t.jsx(z,{content:x,position:"top",disabled:!o,children:S},e)}return t.jsx("span",{children:S},e)};return n?t.jsxs("div",{className:y,ref:T,children:[N(0),t.jsxs("span",{className:"star-rating__text",children:[c.toFixed(1),a&&t.jsxs("span",{className:"star-rating__count",children:[" (",a,")"]})]})]}):t.jsxs("div",{className:y,ref:T,children:[Array.from({length:m},(e,s)=>N(s)),a&&!n&&t.jsxs("span",{className:"star-rating__total-count",children:["(",a,")"]})]})};B.__docgenInfo={description:"",methods:[],displayName:"StarRating",props:{className:{required:!1,tsType:{name:"string"},description:""},rating:{required:!0,tsType:{name:"number"},description:""},maxRating:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}},compact:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},readonly:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onRatingChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(rating: number) => void",signature:{arguments:[{type:{name:"number"},name:"rating"}],return:{name:"void"}}},description:""},size:{required:!1,tsType:{name:"union",raw:'"sm" | "md" | "lg"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'}]},description:"",defaultValue:{value:'"md"',computed:!1}},totalRatings:{required:!1,tsType:{name:"number"},description:""},ratingBreakdown:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  [key: number]: number; // star rating -> percentage
}`,signature:{properties:[{key:{name:"number"},value:{name:"number",required:!0}}]}},description:""},showDetailedTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},reviewsLink:{required:!1,tsType:{name:"string"},description:""},onReviewsClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{B as S};
