@use "../../styles/design-system/mixins.scss";

/*  ButtonGroup Component Styles */

.btn-group,
.btn-group-vertical {
  position: relative;
  display: inline-flex;
  vertical-align: middle;

  > .btn {
    position: relative;
    flex: 1 1 auto;

    &:hover,
    &:focus,
    &:active,
    &.active {
      z-index: 1;
    }

    &:focus {
      z-index: 2;
    }
  }
}

.btn-group {
  > .btn:not(:first-child),
  > .btn-group:not(:first-child) {
    margin-left: -1px;
  }

  > .btn:not(:last-child):not(.dropdown-toggle),
  > .btn-group:not(:last-child) > .btn {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  > .btn:nth-child(n + 3),
  > :not(.btn-check) + .btn,
  > .btn-group:not(:first-child) > .btn {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }
}

.btn-group-vertical {
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;

  > .btn,
  > .btn-group {
    width: 100%;
  }

  > .btn:not(:first-child),
  > .btn-group:not(:first-child) {
    margin-top: -1px;
  }

  > .btn:not(:last-child):not(.dropdown-toggle),
  > .btn-group:not(:last-child) > .btn {
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
  }

  > .btn ~ .btn,
  > .btn-group:not(:first-child) > .btn {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }
}

.btn-toolbar {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;

  .input-group {
    width: auto;
  }

  > .btn,
  > .btn-group,
  > .input-group {
    margin-right: var(--spacing-2);
  }

  > .btn:last-child,
  > .btn-group:last-child,
  > .input-group:last-child {
    margin-right: 0;
  }
}

/*  Button group sizes */
.btn-group-sm > .btn {
  @include mixins.button-size(sm);
}

.btn-group-lg > .btn {
  @include mixins.button-size(lg);
}

/*  iOS-style Segmented Control - Base styles */
.btn-group-segmented {
  display: inline-flex;
  border-radius: 8px;
  padding: 2px;
  position: relative;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);

/*  Override ALL button variants with higher specificity */
  .btn,
  .btn.btn-primary,
  .btn.btn-secondary,
  .btn.btn-success,
  .btn.btn-danger,
  .btn.btn-warning,
  .btn.btn-info,
  .btn.btn-outline-primary,
  .btn.btn-outline-secondary,
  .btn.btn-outline-success,
  .btn.btn-outline-danger,
  .btn.btn-outline-warning,
  .btn.btn-outline-info {
    background: transparent !important;
    border: none !important;
    border-radius: 6px !important;
    font-weight: 500 !important;
    font-size: var(--font-size-sm) !important;
    padding: var(--spacing-2) var(--spacing-3) !important;
    margin: 0 !important;
    position: relative;
    z-index: 1;
    transition: all 0.2s ease-in-out !important;
    cursor: pointer;
    min-width: 60px;
    text-align: center;
    box-shadow: none !important;

    &:focus {
      outline: none !important;
      background: transparent !important;
      border: none !important;
    }

/*  Active/Selected state base */
    &.active,
    &:active {
      font-weight: 600 !important;
      z-index: 2;
      transform: none !important;
      border: none !important;
      box-shadow:
        0 1px 3px rgba(0, 0, 0, 0.1),
        0 1px 2px rgba(0, 0, 0, 0.06) !important;
    }
  }
}

/*  Color variants for segmented control */
.btn-group-segmented-primary {
  background-color: var(--color-primary-100);

  .btn {
    color: var(--color-primary-600) !important;

    &:hover {
      color: var(--color-primary-700) !important;
      background: transparent !important;
    }

    &:focus {
      box-shadow: 0 0 0 3px rgba(var(--color-primary-500), 0.1) !important;
      color: var(--color-primary-600) !important;
    }

    &.active,
    &:active {
      background-color: var(--color-primary-500) !important;
      color: white !important;

      &:hover,
      &:focus {
        background-color: var(--color-primary-600) !important;
        color: white !important;
      }
    }
  }
}

.btn-group-segmented-secondary {
  background-color: var(--color-gray-100);

  .btn {
    color: var(--color-gray-600) !important;

    &:hover {
      color: var(--color-gray-800) !important;
      background: transparent !important;
    }

    &:focus {
      box-shadow: 0 0 0 3px rgba(var(--color-gray-400), 0.1) !important;
      color: var(--color-gray-600) !important;
    }

    &.active,
    &:active {
      background-color: white !important;
      color: var(--color-gray-900) !important;

      &:hover,
      &:focus {
        background-color: white !important;
        color: var(--color-gray-900) !important;
      }
    }
  }
}

.btn-group-segmented-success {
  background-color: var(--color-success-100);

  .btn {
    color: var(--color-success-600) !important;

    &:hover {
      color: var(--color-success-700) !important;
      background: transparent !important;
    }

    &:focus {
      box-shadow: 0 0 0 3px rgba(var(--color-success-500), 0.1) !important;
      color: var(--color-success-600) !important;
    }

    &.active,
    &:active {
      background-color: var(--color-success-500) !important;
      color: white !important;

      &:hover,
      &:focus {
        background-color: var(--color-success-600) !important;
        color: white !important;
      }
    }
  }
}

.btn-group-segmented-danger {
  background-color: var(--color-danger-100);

  .btn {
    color: var(--color-danger-600) !important;

    &:hover {
      color: var(--color-danger-700) !important;
      background: transparent !important;
    }

    &:focus {
      box-shadow: 0 0 0 3px rgba(var(--color-danger-500), 0.1) !important;
      color: var(--color-danger-600) !important;
    }

    &.active,
    &:active {
      background-color: var(--color-danger-500) !important;
      color: white !important;

      &:hover,
      &:focus {
        background-color: var(--color-danger-600) !important;
        color: white !important;
      }
    }
  }
}

.btn-group-segmented-warning {
  background-color: var(--color-warning-100);

  .btn {
    color: var(--color-warning-700) !important;

    &:hover {
      color: var(--color-warning-800) !important;
      background: transparent !important;
    }

    &:focus {
      box-shadow: 0 0 0 3px rgba(var(--color-warning-500), 0.1) !important;
      color: var(--color-warning-700) !important;
    }

    &.active,
    &:active {
      background-color: var(--color-warning-500) !important;
      color: var(--color-gray-900) !important;

      &:hover,
      &:focus {
        background-color: var(--color-warning-600) !important;
        color: var(--color-gray-900) !important;
      }
    }
  }
}

.btn-group-segmented-info {
  background-color: var(--color-info-100);

  .btn {
    color: var(--color-info-600) !important;

    &:hover {
      color: var(--color-info-700) !important;
      background: transparent !important;
    }

    &:focus {
      box-shadow: 0 0 0 3px rgba(var(--color-info-500), 0.1) !important;
      color: var(--color-info-600) !important;
    }

    &.active,
    &:active {
      background-color: var(--color-info-500) !important;
      color: white !important;

      &:hover,
      &:focus {
        background-color: var(--color-info-600) !important;
        color: white !important;
      }
    }
  }
}

.btn-group-segmented-light {
  background-color: #ebebeb;

  .btn {
    color: #111827 !important;
    background: transparent !important;

    &:hover {
      color: #111827 !important;
      background: #eeeeee !important;
    }

    &:focus {
      box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.1) !important;/*  gray-400 focus ring */
      color: #111827 !important;
      background: transparent !important;
    }

    &.active,
    &:active {
      background-color: #fefefe !important;
      color: #111827 !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;

      &:hover,
      &:focus {
        background-color: #fefefe !important;
        color: #111827 !important;
      }
    }
  }
}

/*  Size variants for segmented control */
.btn-group-segmented.btn-group-sm .btn {
  padding: var(--spacing-1) var(--spacing-2);
  font-size: var(--font-size-xs);
  min-width: 50px;
}

.btn-group-segmented.btn-group-lg .btn {
  padding: var(--spacing-3) var(--spacing-4);
  font-size: var(--font-size-base);
  min-width: 70px;
}

/*  Dark mode support (excludes light variant which maintains its light appearance) */
@media (prefers-color-scheme: dark) {
  .btn-group-segmented-primary {
    background-color: var(--color-primary-900);

    .btn {
      color: var(--color-primary-300) !important;

      &:hover {
        color: var(--color-primary-200) !important;
      }

      &.active,
      &:active {
        background-color: var(--color-primary-600) !important;
        color: white !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;

        &:hover,
        &:focus {
          background-color: var(--color-primary-500) !important;
        }
      }
    }
  }

  .btn-group-segmented-secondary {
    background-color: var(--color-gray-800);

    .btn {
      color: var(--color-gray-400) !important;

      &:hover {
        color: var(--color-gray-200) !important;
      }

      &.active,
      &:active {
        background-color: var(--color-gray-700) !important;
        color: white !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;

        &:hover,
        &:focus {
          background-color: var(--color-gray-600) !important;
        }
      }
    }
  }

  .btn-group-segmented-success {
    background-color: var(--color-success-900);

    .btn {
      color: var(--color-success-300) !important;

      &:hover {
        color: var(--color-success-200) !important;
      }

      &.active,
      &:active {
        background-color: var(--color-success-600) !important;
        color: white !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;

        &:hover,
        &:focus {
          background-color: var(--color-success-500) !important;
        }
      }
    }
  }

  .btn-group-segmented-danger {
    background-color: var(--color-danger-900);

    .btn {
      color: var(--color-danger-300) !important;

      &:hover {
        color: var(--color-danger-200) !important;
      }

      &.active,
      &:active {
        background-color: var(--color-danger-600) !important;
        color: white !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;

        &:hover,
        &:focus {
          background-color: var(--color-danger-500) !important;
        }
      }
    }
  }

  .btn-group-segmented-warning {
    background-color: var(--color-warning-900);

    .btn {
      color: var(--color-warning-300) !important;

      &:hover {
        color: var(--color-warning-200) !important;
      }

      &.active,
      &:active {
        background-color: var(--color-warning-500) !important;
        color: var(--color-gray-900) !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;

        &:hover,
        &:focus {
          background-color: var(--color-warning-400) !important;
        }
      }
    }
  }

  .btn-group-segmented-info {
    background-color: var(--color-info-900);

    .btn {
      color: var(--color-info-300) !important;

      &:hover {
        color: var(--color-info-200) !important;
      }

      &.active,
      &:active {
        background-color: var(--color-info-600) !important;
        color: white !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;

        &:hover,
        &:focus {
          background-color: var(--color-info-500) !important;
        }
      }
    }
  }

/*  Light variant intentionally excluded - maintains light appearance in all modes */
}
